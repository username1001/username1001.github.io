{"version":3,"sources":["App.js","index.js"],"names":["DEFAULT_QUERY","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","results","searchKey","searchTerm","needsToSearchTopStories","bind","assertThisInitialized","setSearchTopStories","fetchSearchTopStories","onSearchChange","onSearchSubmit","onDismiss","result","hits","page","_this$state","oldHits","updatedHits","toConsumableArray","concat","setState","objectSpread","defineProperty","_this2","arguments","length","undefined","fetch","then","response","json","catch","error","event","preventDefault","target","value","id","_this$state2","_results$searchKey","filter","item","objectID","_this3","_this$state3","list","react_default","a","createElement","className","App_Search","onChange","onSubmit","App_Table","App_Button","onClick","Component","Search","_ref","children","type","Table","_ref2","map","key","style","width","href","url","title","author","num_comments","points","Button","_ref3","_ref3$className","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.d2ceac80.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\n\nconst DEFAULT_QUERY = 'JavaScript';\nconst DEFAULT_HPP = '100';\n\nconst PATH_BASE = 'https://hn.algolia.com/api/v1';\nconst PATH_SEARCH = '/search';\nconst PARAM_SEARCH = 'query=';\nconst PARAM_PAGE = 'page=';\nconst PARAM_HPP = 'hitsPerPage=';\n\n// const url = `${PATH_BASE}${PATH_SEARCH}?${PARAM_SEARCH}${DEFAULT_QUERY}&${PARAM_PAGE}`;\n\n// const isSearched = searchTerm => item =>\n//   item.title.toLowerCase().includes(searchTerm.toLowerCase());\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      results: null,\n      searchKey: '',\n      searchTerm: DEFAULT_QUERY\n    };\n    this.needsToSearchTopStories = this.needsToSearchTopStories.bind(this);\n    this.setSearchTopStories = this.setSearchTopStories.bind(this);\n    this.fetchSearchTopStories = this.fetchSearchTopStories.bind(this);\n    this.onSearchChange = this.onSearchChange.bind(this);\n    this.onSearchSubmit = this.onSearchSubmit.bind(this);\n    this.onDismiss = this.onDismiss.bind(this);\n  }\n\n  needsToSearchTopStories(searchTerm) {\n    return !this.state.results[searchTerm];\n  }\n\n  setSearchTopStories(result) {\n    const { hits, page } = result;\n    const { searchKey, results } = this.state;\n\n    const oldHits =\n      results && results[searchKey] ? results[searchKey].hits : [];\n    const updatedHits = [...oldHits, ...hits];\n    this.setState({\n      results: {\n        ...results,\n        [searchKey]: { hits: updatedHits, page }\n      }\n    });\n  }\n\n  componentDidMount() {\n    const { searchTerm } = this.state;\n    this.setState({ searchKey: searchTerm });\n    this.fetchSearchTopStories(searchTerm);\n  }\n\n  fetchSearchTopStories(searchTerm, page = 0) {\n    fetch(\n      `${PATH_BASE}${PATH_SEARCH}?${PARAM_SEARCH}${searchTerm}&${PARAM_PAGE}${page}&${PARAM_HPP}${DEFAULT_HPP}`\n    )\n      .then(response => response.json())\n      .then(result => this.setSearchTopStories(result))\n      .catch(error => error);\n  }\n\n  onSearchSubmit(event) {\n    const { searchTerm } = this.state;\n    this.setState({ searchKey: searchTerm });\n\n    if (this.needsToSearchTopStories(searchTerm)) {\n      this.fetchSearchTopStories(searchTerm);\n    }\n    event.preventDefault();\n  }\n  onSearchChange(event) {\n    this.setState({ searchTerm: event.target.value });\n  }\n\n  onDismiss(id) {\n    const { searchKey, results } = this.state;\n    const { hits, page } = results[searchKey];\n\n    const isNotId = item => item.objectID !== id;\n    const updatedHits = hits.filter(isNotId);\n    this.setState({\n      results: {\n        ...results,\n        [searchKey]: { hits: updatedHits, page }\n      }\n    });\n  }\n\n  render() {\n    const { searchTerm, results, searchKey } = this.state;\n    const page =\n      (results && results[searchKey] && results[searchKey].page) || 0;\n    const list =\n      (results && results[searchKey] && results[searchKey].hits) || [];\n    return (\n      <div className=\"page\">\n        <div className=\"interactions\">\n          <Search\n            value={searchTerm}\n            onChange={this.onSearchChange}\n            onSubmit={this.onSearchSubmit}\n          >\n            Search\n          </Search>\n        </div>\n        <Table list={list} onDismiss={this.onDismiss} />\n        <Button onClick={() => this.fetchSearchTopStories(searchKey, page + 1)}>\n          More\n        </Button>\n      </div>\n    );\n  }\n}\n\nconst Search = ({ value, onChange, onSubmit, children }) => (\n  <form onSubmit={onSubmit}>\n    <input type=\"text\" value={value} onChange={onChange} />\n    <button type=\"submit\">{children}</button>\n  </form>\n);\n\nconst Table = ({ list, onDismiss }) => (\n  <div className=\"table\">\n    {list.map(item => (\n      <div key={item.objectID} className=\"table-row\">\n        <span style={{ width: '40%' }}>\n          <a href={item.url}>{item.title}</a>\n        </span>\n        <span style={{ width: '30%' }}>{item.author}</span>\n        <span style={{ width: '10%' }}>{item.num_comments}</span>\n        <span style={{ width: '10%' }}>{item.points}</span>\n        <span style={{ width: '10%' }}>\n          <Button\n            onClick={() => onDismiss(item.objectID)}\n            className=\"button-inline\"\n          >\n            Dismiss\n          </Button>\n        </span>\n      </div>\n    ))}\n  </div>\n);\n\nconst Button = ({ onClick, className = '', children }) => (\n  <button onClick={onClick} className={className} type=\"button\">\n    {children}\n  </button>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nif (module.hot) {\n  module.hot.accept();\n}\n"],"sourceRoot":""}